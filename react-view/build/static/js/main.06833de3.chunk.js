(this["webpackJsonpreact-view"]=this["webpackJsonpreact-view"]||[]).push([[0],{34:function(e,t,a){},51:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),c=a.n(r),i=(a(51),a.p,a(34),a(15)),l=a(16),o=a(18),d=a(17),u=a(6),j=a(8),b=a.n(j),h=a(13),m=a(21),f=a(83),p=a(84),O=a(85),x=a(9),g=a.n(x),v={backendURL:"http://localhost:8081"},N=a(1),y=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={formSubmit:"",displayMessage:""},n.state.displayMessage="",n.formSubmit=n.formSubmit.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"formSubmit",value:function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target),a=new FormData(t.target),g.a.defaults.withCredentials=!0,e.next=6,g()({method:"post",url:v.backendURL+"/usersignup",data:{fname:a.get("fname"),lname:a.get("lname"),email:a.get("email"),password:a.get("password")},config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){var t;e.status?n.setState({displayMessage:(t=e.message,Object(N.jsx)("div",{className:"form-group",children:Object(N.jsxs)("label",{children:[t," Click ",Object(N.jsx)("a",{href:"/usersignin",children:"here"})," to login"]})}))}):n.setState({displayMessage:e.message})})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{id:"FixedTop",class:"fixed-top text-light bg-dark",children:Object(N.jsx)("h4",{children:"SIGN UP"})}),Object(N.jsx)(f.a,{children:Object(N.jsx)(p.a,{className:"signup_signin_panel",children:Object(N.jsxs)(O.a,{xs:6,className:"card signupsignin-card",children:[Object(N.jsx)("h5",{id:"SignInText",children:"Signup User"}),Object(N.jsx)("hr",{}),Object(N.jsxs)("form",{onSubmit:this.formSubmit,children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"First Name"}),Object(N.jsx)("input",{type:"text",required:!0,name:"fname",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"Last Name"}),Object(N.jsx)("input",{type:"text",required:!0,name:"lname",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"Email"}),Object(N.jsx)("input",{type:"email",required:!0,name:"email",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"Password"}),Object(N.jsx)("input",{type:"password",required:!0,name:"password",className:"form-control"})]}),Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit"})}),this.state.displayMessage]})]})})})]})}}]),a}(n.Component),k=y,w=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={message:"",submitHandler:""},n.state.message="",n.submitHandler=n.submitHandler.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"submitHandler",value:function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target),a=new FormData(t.target),g.a.defaults.withCredentials=!0,e.next=6,g()({method:"post",url:v.backendURL+"/usersignin",data:{email:a.get("email"),password:a.get("password")},config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){e.status?(n.setState({message:e.message}),localStorage.setItem("userid",e.userid),localStorage.setItem("firstname",e.firstname),localStorage.setItem("lastname",e.lastname)):alert(e.message)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=localStorage.getItem("userid");console.log("backendurl.."+v.backendURL);var t=Object(N.jsx)("div",{});return e&&(t=Object(N.jsx)(u.a,{to:"/userdashboard"})),Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"fixed-top text-light bg-dark",children:Object(N.jsx)("h4",{children:"Signin"})}),Object(N.jsxs)(f.a,{children:[t,Object(N.jsx)(p.a,{className:"signup_signin_panel",children:Object(N.jsxs)(O.a,{xs:6,className:"card signupsignin-card",children:[Object(N.jsx)("h5",{id:"SignInText",children:"Sign in"}),Object(N.jsx)("hr",{}),Object(N.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"Email"}),Object(N.jsx)("input",{type:"email",name:"email",required:!0,className:"form-control",placeholder:"Enter your Email"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"Password"}),Object(N.jsx)("input",{type:"password",name:"password",required:!0,className:"form-control",placeholder:" Password"})]}),Object(N.jsx)("div",{className:"form-group",children:Object(N.jsx)("button",{type:"submit",className:"btn btn-success",onSubmit:this.redirectTo,children:"Submit"})}),Object(N.jsx)("div",{className:"form-group",children:Object(N.jsxs)("label",{children:[" New User? Please Signup ",Object(N.jsx)("a",{href:"/usersignup",children:"here"})," first to login"]})})]})]})})]})]})}}]),a}(n.Component),F=w,S=a(22),C=a(88),L=a(87),D=function(){var e=Object(n.useState)(null),t=Object(S.a)(e,2),a=t[0],s=t[1],r=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("Select a file first!");case 3:return t.preventDefault(),(n=new FormData(t.target)).append("file",a[0]),n.append("userid",localStorage.getItem("userid")),n.append("firstname",localStorage.getItem("firstname")),n.append("lastname",localStorage.getItem("lastname")),g.a.defaults.withCredentials=!0,e.next=12,g.a.post(v.backendURL+"/uploadFile",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;t&&t.status?alert("File uploaded successfully"):alert("Cannot upload file")}));case 12:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),c=Object(n.useState)(!1),i=Object(S.a)(c,2),l=i[0],o=i[1];return Object(N.jsxs)(f.a,{children:[Object(N.jsx)(C.a,{onClick:function(){return o(!0)},children:"Upload File"}),Object(N.jsxs)(L.a,{show:l,onHide:function(){return o(!1)},children:[Object(N.jsx)(L.a.Header,{closeButton:!0,children:Object(N.jsx)(L.a.Title,{children:"File Details"})}),Object(N.jsx)(L.a.Body,{children:Object(N.jsxs)("form",{onSubmit:r,children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"File Name"}),Object(N.jsx)("input",{type:"text",required:!0,name:"filename",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"File Description"}),Object(N.jsx)("input",{type:"text",required:!0,name:"filedesc",className:"form-control"})]}),Object(N.jsx)("label",{children:"Upload file"}),Object(N.jsx)("input",{type:"file",onChange:function(e){return s(e.target.files)}}),Object(N.jsx)(C.a,{type:"submit",children:"Submit"}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{})," ",Object(N.jsx)("br",{})]})})]})]})},I=function(e){var t=Object(n.useState)(null),a=Object(S.a)(t,2),s=a[0],r=a[1],c=function(){var t=Object(h.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s){t.next=3;break}throw new Error("Select a file first!");case 3:return a.preventDefault(),(n=new FormData(a.target)).append("file",s[0]),n.append("fileid",e.fileid),n.append("previousFileName",e.bucketFileName),n.append("userid",localStorage.getItem("userid")),g.a.defaults.withCredentials=!0,t.next=12,g.a.post(v.backendURL+"/updateFile",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;t&&t.status?alert("Update is successful"):alert("Cannot update file")}));case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),i=Object(n.useState)(!1),l=Object(S.a)(i,2),o=l[0],d=l[1];return Object(N.jsxs)(f.a,{children:[Object(N.jsx)(C.a,{onClick:function(){return d(!0)},children:"UpdateFile"}),Object(N.jsxs)(L.a,{show:o,onHide:function(){return d(!1)},children:[Object(N.jsx)(L.a.Header,{closeButton:!0,children:Object(N.jsx)(L.a.Title,{children:"File Details"})}),Object(N.jsx)(L.a.Body,{children:Object(N.jsxs)("form",{onSubmit:c,children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"File Name"}),Object(N.jsx)("input",{type:"text",required:!0,name:"filename",className:"form-control"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{className:"control-label",children:"File Description"}),Object(N.jsx)("input",{type:"text",required:!0,name:"filedesc",className:"form-control"})]}),Object(N.jsx)("label",{children:"Update file"}),Object(N.jsx)("input",{type:"file",onChange:function(e){return r(e.target.files)}}),Object(N.jsx)(C.a,{type:"submit",children:"Submit"})]})})]})]})},U=a(28),T=a(86),B=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={fileList:"",loading:!0,reload:!1},n.deleteFile=function(e,t){g()({method:"get",url:v.backendURL+"/deleteFile?fileid="+e+"&bucketFileName="+t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){e.status?alert("File deleted successfully!"):alert("Cannot delete file!")})).catch((function(e){console.log(e)}))},n.renderAllFiles=function(){var e=[];if(n.state.fileList&&n.state.fileList.length>0){var t,a=Object(U.a)(n.state.fileList);try{var s=function(){var a=t.value,s=[],r="https://d2fm7gtvkx48d9.cloudfront.net/"+a.bucketFileName;s.push(Object(N.jsx)("td",{children:localStorage.getItem("firstname")})),s.push(Object(N.jsx)("td",{children:localStorage.getItem("lastname")})),s.push(Object(N.jsx)("td",{children:a.filename})),s.push(Object(N.jsx)("td",{children:a.filedescription})),s.push(Object(N.jsx)("td",{children:a.dateuploaded})),s.push(Object(N.jsx)("td",{children:a.datemodified})),s.push(Object(N.jsx)("td",{children:Object(N.jsx)(I,{fileid:a.fileid,bucketFileName:a.bucketFileName})})),s.push(Object(N.jsx)("td",{children:Object(N.jsx)("a",{href:r,target:"_blank",children:Object(N.jsx)(C.a,{children:"Download"})})})),s.push(Object(N.jsx)("td",{children:Object(N.jsx)(C.a,{onClick:function(){return n.deleteFile(a.fileid,a.bucketFileName)},children:"DeleteFile"})})),e.push(Object(N.jsx)("tr",{children:s},a.fileid))};for(a.s();!(t=a.n()).done;)s()}catch(r){a.e(r)}finally{a.f()}}return e},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:"get",url:v.backendURL+"/fetchUserFiles?userid="+localStorage.getItem("userid"),config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){e.status?t.setState({loading:!1,fileList:e.fileList}):alert(e.message)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderBody",value:function(){return this.state.loading?Object(N.jsx)("div",{}):this.state.fileList&&0!=this.state.fileList.length?Object(N.jsxs)(T.a,{children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"First Name"})," ",Object(N.jsx)("th",{children:"Last Name"})," ",Object(N.jsx)("th",{children:"File name"}),"  ",Object(N.jsx)("th",{children:"File Description"}),"  ",Object(N.jsx)("th",{children:"Date uploaded"})," ",Object(N.jsx)("th",{children:"Date modified"})]})}),Object(N.jsx)("tbody",{children:this.renderAllFiles()})]}):Object(N.jsx)("div",{children:"No files"})}},{key:"logoff",value:function(){localStorage.clear(),this.setState({reload:!0})}},{key:"render",value:function(){var e=this,t=localStorage.getItem("userid"),a=Object(N.jsx)("div",{});t||(a=Object(N.jsx)(u.a,{to:"/usersignin"}));var n=localStorage.getItem("firstname"),s=localStorage.getItem("lastname");return Object(N.jsxs)(f.a,{children:[a,Object(N.jsxs)("div",{className:"fixed-top text-light bg-dark",children:[Object(N.jsx)("h4",{children:"User Dashboard"}),Object(N.jsx)("span",{children:n+" "+s}),"\xa0\xa0",Object(N.jsx)("span",{children:Object(N.jsx)("a",{onClick:function(){return e.logoff()},children:"Logoff"})})]}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(D,{}),this.renderBody()]})}}]),a}(n.Component),E=B,q=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={fileList:"",loading:!0},n.deleteFile=function(e,t){g()({method:"get",url:v.backendURL+"/deleteFile?fileid="+e+"&bucketFileName="+t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){e.status?alert("File deleted successfully!"):alert("Cannot delete file!")})).catch((function(e){console.log(e)}))},n.renderAllFiles=function(){var e=[];if(n.state.fileList&&n.state.fileList.length>0){var t,a=Object(U.a)(n.state.fileList);try{var s=function(){var a=t.value,s=[];s.push(Object(N.jsx)("td",{children:localStorage.getItem("firstname")})),s.push(Object(N.jsx)("td",{children:localStorage.getItem("lastname")})),s.push(Object(N.jsx)("td",{children:a.filename})),s.push(Object(N.jsx)("td",{children:a.filedescription})),s.push(Object(N.jsx)("td",{children:a.dateuploaded})),s.push(Object(N.jsx)("td",{children:a.datemodified})),s.push(Object(N.jsx)("td",{children:Object(N.jsx)(I,{fileid:a.fileid,bucketFileName:a.bucketFileName})})),s.push(Object(N.jsx)("td",{children:Object(N.jsx)(C.a,{onClick:function(){return n.deleteFile(a.fileid,a.bucketFileName)},children:"DeleteFile"})})),e.push(Object(N.jsx)("tr",{children:s}))};for(a.s();!(t=a.n()).done;)s()}catch(r){a.e(r)}finally{a.f()}}return e},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:"get",url:v.backendURL+"/fetchAdminFiles",config:{headers:{"Content-Type":"multipart/form-data"}}}).then((function(e){if(e.status>=500)throw new Error("Bad response from server");return e.data})).then((function(e){e.status?t.setState({loading:!1,fileList:e.fileList}):alert(e.message)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderBody",value:function(){return this.state.loading?Object(N.jsx)("div",{}):this.state.fileList&&0!=this.state.fileList.length?Object(N.jsxs)(T.a,{children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"First Name"})," ",Object(N.jsx)("th",{children:"Last Name"})," ",Object(N.jsx)("th",{children:"File name"}),"  ",Object(N.jsx)("th",{children:"File Description"}),"  ",Object(N.jsx)("th",{children:"Date uploaded"})," ",Object(N.jsx)("th",{children:"Date modified"})]})}),Object(N.jsx)("tbody",{children:this.renderAllFiles()})]}):Object(N.jsx)("div",{children:"No files"})}},{key:"render",value:function(){return Object(N.jsx)(f.a,{children:this.renderBody()})}}]),a}(n.Component),R=q,H=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return console.log("react version..."),console.log(s.a.version),Object(N.jsxs)(u.d,{children:[Object(N.jsx)(u.b,{path:"/usersignup",component:k}),Object(N.jsx)(u.b,{path:"/usersignin",component:F}),Object(N.jsx)(u.b,{path:"/fileupload",component:D}),Object(N.jsx)(u.b,{path:"/updatefile",component:I}),Object(N.jsx)(u.b,{path:"/userdashboard",component:E}),Object(N.jsx)(u.b,{path:"/admindashboard",component:R})]})}}]),a}(n.Component),M=H,P=a(20);var A=function(){return Object(N.jsx)(P.a,{children:Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",children:Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(P.b,{className:"navbar-brand",to:"/",children:"Cloud Vault"}),Object(N.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02",children:Object(N.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(P.b,{className:"nav-link",to:"/usersignin",children:"Login"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(P.b,{className:"nav-link",to:"/usersignup",children:"SignUp"})})]})})]})}),Object(N.jsx)(M,{})]})})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,89)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(A,{})}),document.getElementById("root")),_()}},[[81,1,2]]]);
//# sourceMappingURL=main.06833de3.chunk.js.map